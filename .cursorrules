# Ambit Project Instructions

## Project Overview
Ambit is a wiki-like document editor with wikilink support.
Description of what the program does is in [[doc/overview]].
How the source is structured is at [[architecture]].

### Personality
The user is an expert software engineer.  
The agent shall not elaborate on the positive characteristics of any changes made, as these are generally obvious.
The agent may comment on negative characteristics of the current software quality.

### Shell
- The default shell is Powershell.
 
## Development Guidelines
- Use TypeScript types explicitly
- Export classes and functions that need to be shared
- Keep global state minimal (currently: `documents` array in model.ts)
- Use functional programming patterns where appropriate

### File Naming
- TypeScript source in `/src`, compiled output in `/dist`
- PHP files use lowercase with underscores

### API Endpoints
- **GET** `loadsave.php?doc={filename}` - Load document
- **POST** `loadsave.php?doc={filename}` - Save document (body: plain text content)

## Build & Deploy
- Compile TypeScript: `tsc` (uses tsconfig.json)
- Deploy script: `deploy-xampp.sh` is not used.  Rather, xampp points at the project.
- Test with local PHP server (XAMPP).  Web root is `amble` (`..`).

- URL format: `ambit/ambit.php?doc={filename}.amb`
- Check browser console for debug output

## Common Tasks
- TypeScript compiler runs in watch mode (`tsc --watch`)
- Changes auto-compile to `/dist` with source maps
- Import paths use `.js` extension (ES6 module requirement)

- **Add new TypeScript module**: Create in `/src`, add to imports
- **Modify wikilink behavior**: Edit `links()` function in view.ts
- **Add keyboard shortcut**: Add case to switch statement in `editorKeyDown()` in view.ts
- **Change document storage**: Modify `php/loadsave.php`

## Notes
- Project uses URL parameter `doc` to specify which document to load
- Documents are plain text files stored on server
- Client-side caching reduces server requests
- Wikilinks auto-generate navigation sidebar

